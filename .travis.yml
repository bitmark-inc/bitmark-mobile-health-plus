language: swift
osx_image: xcode10
xcode_sdk: iphonesimulator12.0
node_js: 
  - "8"
branches:
  only:
    - master

before_install:
  - |

      declare -r SSH_FILE="$(mktemp -u $HOME/.ssh/github_deploy_key)"

      # - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

      # Decrypt the file containing the private key
      # (Note: this is the same as what is generated by the Travis CLI at step 2.5)

      openssl aes-256-cbc \
        -K $encrypted_5c13274db47d_key \
        -iv $encrypted_5c13274db47d_iv \
        -in ".travis/github_deploy_key.enc" \
        -out "$SSH_FILE" -d

      # - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

      # Enable SSH authentication

      chmod 600 "$SSH_FILE" \
        && printf "%s\n" \
            "Host github.com" \
            "  IdentityFile $SSH_FILE" \
            "  LogLevel ERROR" >> ~/.ssh/config
  - gem install fastlane

install:
  - fastlane add_plugin latest_hockey_build_number

script:
  - fastlane ios betatravis
after_success: